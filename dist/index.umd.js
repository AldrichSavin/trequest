!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("axios")):"function"==typeof define&&define.amd?define(["exports","axios"],n):n((t||self).trequest={},t.axios)}(this,function(t,n){function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var r=/*#__PURE__*/e(n);function o(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,u(t,n)}function i(t){return i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},i(t)}function u(t,n){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},u(t,n)}function c(t,n,e){return c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct.bind():function(t,n,e){var r=[null];r.push.apply(r,n);var o=new(Function.bind.apply(t,r));return e&&u(o,e.prototype),o},c.apply(null,arguments)}function s(t){var n="function"==typeof Map?new Map:void 0;return s=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return c(t,arguments,i(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),u(e,t)},s(t)}var f="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function a(t,n,e){if(!t.s){if(e instanceof l){if(!e.s)return void(e.o=a.bind(null,t,n));1&n&&(n=e.s),e=e.v}if(e&&e.then)return void e.then(a.bind(null,t,n),a.bind(null,t,2));t.s=n,t.v=e;var r=t.o;r&&r(t)}}var l=/*#__PURE__*/function(){function t(){}return t.prototype.then=function(n,e){var r=new t,o=this.s;if(o){var i=1&o?n:e;if(i){try{a(r,1,i(this.v))}catch(t){a(r,2,t)}return r}return this}return this.o=function(t){try{var o=t.v;1&t.s?a(r,1,n?n(o):o):e?a(r,1,e(o)):a(r,2,o)}catch(t){a(r,2,t)}},r},t}();function h(t){return t instanceof l&&1&t.s}var p=/*#__PURE__*/function(t){function n(n){var e;return void 0===n&&(n={}),(e=t.call(this)||this).coreContext=void 0,e.coreContext=n,e}o(n,t);var e=n.prototype;return e.register=function(t){var n=this;(Array.isArray(t)?t:[t]).forEach(function(t){n.add(t),null==t.onRegister||t.onRegister(n.coreContext)})},e.initPluginContext=function(t,n){(Array.isArray(t)?t:[t]).forEach(function(t){null==t.setContext||t.setContext(n)}),this.run("onInit")},e.unregister=function(t){this.delete(t)},e.filters=function(t){return Array.from(this).map(function(n){if(n[t]&&"function"==typeof n[t])return n[t].bind(n)}).filter(Boolean)},e.run=function(t){var n=arguments;this.filters(t).forEach(function(t){t.apply(t,[].slice.call(n,1))})},e.runAsync=function(t){var n=arguments,e=this.filters(t);return Promise.all(e.map(function(t){return t.apply(t,[].slice.call(n,1))}))},e.runSync=function(t){try{var n=arguments,e=function(t,n,e){if("function"==typeof t[f]){var r,o,i,u=t[f]();if(function t(e){try{for(;!(r=u.next()).done;)if((e=n(r.value))&&e.then){if(!h(e))return void e.then(t,i||(i=a.bind(null,o=new l,2)));e=e.v}o?a(o,1,e):o=e}catch(t){a(o||(o=new l),2,t)}}(),u.return){var c=function(t){try{r.done||u.return()}catch(t){}return t};if(o&&o.then)return o.then(c,function(t){throw c(t)});c()}return o}if(!("length"in t))throw new TypeError("Object is not iterable");for(var s=[],p=0;p<t.length;p++)s.push(t[p]);return function(t,n,e){var r,o,i=-1;return function e(u){try{for(;++i<t.length;)if((u=n(i))&&u.then){if(!h(u))return void u.then(e,o||(o=a.bind(null,r=new l,2)));u=u.v}r?a(r,1,u):r=u}catch(t){a(r||(r=new l),2,t)}}(),r}(s,function(t){return n(s[t])})}(this.filters(t),function(t){return Promise.resolve(t.apply(t,[].slice.call(n,1))).then(function(){})});return Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(t){return Promise.reject(t)}},e.runOnion=function(t){var n=arguments;return this.filters(t).reduce(function(t,e){var r;return null!=(r=e.apply(e,[].slice.call(n,1)))?r:t},void 0)},e.runOnionAsync=function(t){return this.filters(t).reduce(function(t,n){try{var e=arguments;return Promise.resolve(t).then(function(t){var r;return null!=(r=n.apply(n,[].slice.call(e,1)))?r:t})}catch(t){return Promise.reject(t)}},Promise.resolve(void 0))},e.getPluginByName=function(t){return Array.from(this).find(function(n){return n.name===t})},n}(/*#__PURE__*/s(Set)),y=function(t){return"[object Object]"===Object.prototype.toString.call(t)},v=/*#__PURE__*/function(t){function n(n){var e;return void 0===n&&(n={}),(e=t.call(this)||this).coreConfig=void 0,e.instance=void 0,e.coreConfig=n,e.mountPlugins(),e.instance=r.default.create({}),e.registerRequestInterceptor(),e.registerResponseInterceptor(),e}o(n,t);var e=n.prototype;return e.mountPlugins=function(){var t=this.coreConfig.plugins,n=void 0===t?[]:t;this.register(n),this.initPluginContext(n,this)},e.registerRequestInterceptor=function(){var t=this,n=this;this.instance.interceptors.request.use(function(n){try{return t.run("onRequest",n),Promise.resolve(n)}catch(t){return Promise.reject(t)}},function(t){try{return Promise.resolve(n.runOnionAsync("onError",t)).then(function(e){return n.run("onFinally",e||t),Promise.reject(e||t)})}catch(t){return Promise.reject(t)}})},e.registerResponseInterceptor=function(){var t=this,n=this;this.instance.interceptors.response.use(function(n){try{return Promise.resolve(t.runOnionAsync("onResponse",n)).then(function(e){var r=e||n.data;return t.run("onFinally",r),r})}catch(t){return Promise.reject(t)}},function(t){try{return Promise.resolve(n.runOnionAsync("onError",t)).then(function(e){return n.run("onFinally",t),Promise.reject(e||t)})}catch(t){return Promise.reject(t)}})},e.isProtocol=function(t){return/(http|https|ws|wss):\/\/([\w.]+\/?)\S*/.test(t)},e.getBaseURL=function(t){var n,e;return t?this.isProtocol(t)?t:y(this.coreConfig.baseURL)&&(null==(e=this.coreConfig.baseURL)?void 0:e[t])||t:"string"==typeof this.coreConfig.baseURL?this.coreConfig.baseURL:y(this.coreConfig.baseURL)&&Reflect.has(this.coreConfig.baseURL||{},"default")?Reflect.get(this.coreConfig.baseURL||{},"default"):(null==(n=this.instance)||null==(n=n.defaults)?void 0:n.baseURL)||""},e.request=function(t){var n;if(null==(n=this.instance)||!n.request)throw new Error("HttpCore instance is not initialized");return this.runOnionAsync("onBeforeRequest",t),this.instance.request(this.mergeConfig(t,{baseURL:this.getBaseURL(t.baseURL)}))},e.mergeConfig=function(t,n){return Object.assign({},t,n)},n}(p),d=/*#__PURE__*/function(t){function n(){return t.call(this)||this}o(n,t);var e=n.prototype;return e.on=function(t,n){return this.set(t,n),this},e.emit=function(t){var n=this.get(t);return!!n&&(n.apply(this,[].slice.call(arguments,1)),!0)},e.off=function(t){return this.delete(t),this},n}(/*#__PURE__*/s(Map));t.AbstractPlugin=/*#__PURE__*/function(t){function n(){var n;return(n=t.call(this)||this)._context={},n.version=void 0,n}o(n,t);var e=n.prototype;return e.setContext=function(t){this._context=t},e.getContext=function(){return this._context},n}(d),t.Core=v,t.EventEmitter=d,t.PluginEventEmitter=p,t.PluginFactory=function(){}});
//# sourceMappingURL=index.umd.js.map
